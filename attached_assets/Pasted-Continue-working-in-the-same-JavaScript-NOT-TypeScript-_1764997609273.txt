Continue working in the same JavaScript (NOT TypeScript) + React + Tailwind CSS, mobile-first project.
Right now, the application persists form state across page refreshes using our form persistence layer (e.g., loadFormData, saveFormData from @/lib/formPersistence).

Current behavior:

If I refresh the browser tab (full page reload) on any route, form data is restored (pre-filled) from storage, and I stay on the same route.

Desired behavior:

Whenever the user performs a full page refresh anywhere in the app (on any route), they should be redirected back to the Home page (e.g., /).

On that refresh, all form data should be cleared so the user is starting fresh (no pre-filled values).

No form data should be persisted across browser refreshes.

Important for this fix:
For this change, DO NOT perform any end-to-end (e2e) tests or automated full-flow testing.
You may do local/component-level checks, but no e2e suites. I will manually confirm the behavior in the browser.

Business requirement – No form persistence across reloads & always return to Home on refresh

Update the app’s behavior so that:

On any full page refresh:

No matter which route the user is currently on (/, /form, /loading, /results, etc.), a full browser reload should result in:

All stored/form data cleared, and

The user being taken to the Home page (the landing route, e.g., /) after the app initializes.

The app must not restore any previous form state or resume a “halfway” flow after a refresh.

Within a single SPA session (no refresh):

The app may still use in-memory state or short-lived persistence to move between routes (e.g., /form → /loading → /results) as long as:

This state is reset when the browser is refreshed.

Navigation via links/buttons (without full reload) should continue to work as it does now.

Form data clearing:

On a new page load (after refresh), the form should behave as if the user is visiting for the first time:

All fields are empty/default.

No partially completed multi-step form state is restored.

Any storage mechanism (localStorage, sessionStorage, IndexedDB, etc.) must not restore old form entries on reload.

Safe behavior on Loading & Results routes:

If the user hits refresh while on /loading or /results:

They should still end up back on the Home page after the app re-initializes.

There should be no runtime errors due to missing form data.

Acceptance criteria (Given / When / Then)
Scenario: Refreshing on the form page

Given the user has filled out some or all form fields on /form

When they perform a full page refresh (browser reload)

Then:

The app initializes and navigates to the Home page (not back to /form).

When they go to /form again from Home, the form is empty/default with no prior data restored.

Scenario: Refreshing on Loading or Results

Given the user submitted the form and is on /loading or /results

When they perform a full page refresh

Then:

The app initializes and navigates to the Home page.

No attempt is made to resume the previous flow using stored form data.

No runtime errors occur due to missing form state.

Scenario: Refreshing on any other route

Given the user is on any route within the app (Home, form, loading, results, or others)

When they refresh the page

Then:

The app always loads into the Home page.

Form state is cleared, and no “in-progress” data is restored.

Scenario: Navigation without refresh still works

Given the user is moving through the app without refreshing the browser (SPA navigation only)

When they go from / → /form → /loading → /results and back

Then:

The app still behaves correctly (state can be maintained in memory for that session).

There is no unexpected data loss purely due to client-side routing.

What I want you (Replit AI) to do

Assess the current form persistence implementation

Inspect:

@/lib/formPersistence and any helpers (loadFormData, saveFormData, clearFormData, etc.).

Where loadFormData() is used (e.g., in the form, in the Loading component, etc.).

Determine:

How and where data is persisted (e.g., localStorage, sessionStorage).

How the app currently decides there is “persisted data” and rehydrates it.

Describe your understanding of the requirements

Explain in your own words:

That no form data should survive a browser refresh, and

That after any refresh, the app should always start at the Home page, regardless of the route that was previously open.

That the app must handle missing form data gracefully on non-Home routes.

Identify key considerations to avoid breaking existing functionality

Ensure:

The redirect behavior on initial load does not cause infinite loops.

Route handling still works correctly when navigating from Home into the form and through the rest of the flow.

Components like Loading and Results can safely assume there might be no form data when loaded directly, and either redirect or show a safe fallback.

Propose a strategy for clearing data & redirecting on refresh

Possible pattern (you choose the implementation details):

Initialization hook / root-level logic:

On app mount (e.g., in the root component or router setup), detect that this is a fresh load and:

Clear any persisted form data (e.g., call clearFormData() or localStorage.removeItem(...)).

Ensure that the initial route resolves to the Home page:

For example, if the router starts on /form or /results due to the URL, programmatically navigate to / once on boot.

Clarify:

Where you will hook this (e.g., in a useEffect in the root layout, router wrapper, or similar).

How you avoid applying this logic repeatedly during normal in-app navigation.

Generate a step-by-step implementation plan

At a minimum include:

Step 1: Review formPersistence to see how data is stored and retrieved.

Step 2: Implement a mechanism that clears persisted form data on initial app load:

For example, in a top-level component, run a useEffect that:

Runs only once on mount.

Clears the relevant form storage key(s).

Step 3: Implement a redirect-to-Home-on-initial-load behavior:

Also in a top-level component or router wrapper:

Detect the initial route, and if it is not Home, navigate to the Home route (e.g., using useLocation or router APIs).

Ensure this happens only on the first render of the SPA session (so normal route changes inside the session are unaffected).

Step 4: Make sure loadFormData() returns null or equivalent after a full reload so that Loading or other components behave as if there is no active form session.

Step 5: Manually test:

Start on Home → go to form → fill some fields → refresh → confirm redirect to Home and empty form.

Start on form (by URL) → refresh → confirm redirect to Home.

Start on loading/results (by URL) → refresh → confirm redirect to Home and no errors.

Keep the scope limited

Do not:

Change results persistence or regeneration behavior.

Refactor unrelated parts of the app.

Only adjust:

Form persistence behavior across reloads.

Initial routing behavior on full page load.

Propose a skeleton framework

Show a conceptual example of how you might implement the root-level logic (pseudo-code):

// e.g., in App.tsx / App.jsx or a RootLayout component
import { useEffect } from "react";
import { useLocation } from "wouter";
import { clearFormData } from "@/lib/formPersistence";

export function AppRoot() {
  const [location, navigate] = useLocation();

  useEffect(() => {
    // Runs once on initial mount
    clearFormData(); // remove any stored form data

    if (location !== "/") {
      navigate("/"); // always start at Home after a full load
    }
  }, []);

  // ...rest of app / router
}


And an example of how clearFormData might be implemented if not already present.

Do not run e2e tests

For this prompt:

You may update formPersistence and root-level routing/initialization logic.

You may perform manual checks in the browser or simple component-level tests.

Do NOT run or modify any end-to-end (e2e) test suites; I will manually verify the behavior.