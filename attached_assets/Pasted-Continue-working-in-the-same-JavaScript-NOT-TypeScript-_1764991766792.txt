Continue working in the same JavaScript (NOT TypeScript) + React + Tailwind CSS, mobile-first project.
The Documents Page, swipeable narratives carousel, response letter view, regeneration buttons/limits, and existing pill-style navigation are already implemented and working.

When the user selected Both (Narratives + Pre-Adverse Action Response Letter), the Documents Page currently uses a pill-style tab navigation to toggle between the two views.

I want to replace the pill-style tabs with a smooth “switch” style toggle, similar to the attached example image (/mnt/data/Screenshot 2025-12-05 at 10.27.50 PM.png), where a rounded pill has a sliding “thumb” or highlight that moves between the two options.

Important for this fix:
For this UI change, DO NOT perform any end-to-end (e2e) tests or automated full-flow testing.
I will manually confirm the change myself.

Business requirement – Switch-style toggle for Narratives vs Response Letter

When the user has generated both narratives and the pre-adverse action response letter:

Replace the existing pill/tab navigation (e.g., [Narratives | Response Letter]) with a single switch/toggle control that:

Has two labels: “Narratives” and “Response Letter”.

Visually resembles a pill/segmented control:

A rounded outer track.

A sliding inner highlight or “thumb” that moves smoothly between the two options when the user changes selection.

The toggle selection should control which content is displayed:

When Narratives is selected:

Show the narratives carousel and its buttons.

When Response Letter is selected:

Show the response letter card and its buttons.

The underlying state/logic for which section is active can reuse the existing tab-state variable; only the UI control for switching is changing.

The control should be:

Mobile-first

Accessible (keyboard and screen-reader friendly)

Smoothly animated when switching (e.g., CSS transition on the “thumb”).

All existing behaviors inside each view (swipeable narratives, Download/Copy/Regenerate buttons, 3x regen limits, tooltips, etc.) must remain unchanged.

Acceptance criteria (Given / When / Then)
Scenario: Switch appears for “Both” selection

Given the user originally selected Both on the Selection Page and has successfully generated documents

When they reach the Documents Page after the disclaimer

Then:

They see a switch-style toggle (not old pill tabs), with labels:

Narratives

Response Letter

The toggle appears near the top of the content area, where the old pill navigation used to be.

Scenario: Switching to Narratives

Given the user is on the Documents Page with both narratives and letter available

When the toggle is set to Narratives (either by default or by user interaction)

Then:

The Narratives side of the switch is visually “active” (e.g., highlighted background, thumb under it, active text color).

The Response Letter side appears “inactive”.

Only the narratives carousel view and its associated buttons (Copy, Download, Regenerate, tooltip behavior) are displayed below the toggle.

Scenario: Switching to Response Letter

Given the user is on the Documents Page with both narratives and letter available

When the user taps/clicks the Response Letter side of the switch, presses keyboard controls (e.g., Space/Enter), or otherwise activates that option

Then:

The switch’s thumb/highlight smoothly transitions to the Response Letter side.

The Response Letter label appears visually active.

Only the response letter card and its actions are shown below the toggle; the narratives carousel is hidden.

Scenario: Accessibility and keyboard behavior

Given a keyboard or screen-reader user is focusing the switch

When they use keyboard interaction (e.g., Tab to focus, Arrow keys or Space/Enter to change selection, depending on the chosen pattern)

Then:

They can toggle between Narratives and Response Letter without needing a mouse.

The active state is reflected visually and in accessibility attributes (e.g., ARIA roles, aria-pressed or segmented control semantics).

Scenario: No regressions in content logic

Given the toggle fully replaces the old pill navigation

When the user switches back and forth between Narratives and Response Letter

Then:

The same content that used to appear under each tab still appears under the corresponding toggle state.

Swipe carousel behavior, buttons, regen limits, and tooltips all continue to work exactly as before.

If the user only generated narratives or only generated the letter (not “both”), the Documents Page continues to show a single view without this toggle (same behavior as before).

What I want you (Replit AI) to do

Assess the enhancement and identify relevant code

Locate the existing pill/tab navigation on the Documents Page (likely a component or JSX block that renders [Narratives | Response Letter]).

Identify the state variable that currently tracks the active tab (e.g., activeTab, selectedView, etc.).

Plan how to reuse that state for the new switch control.

Describe your understanding of the requirements

Explain in your own words:

That we are replacing the pill/tab UI with a switch-style toggle only when both document types are available.

That the new control must toggle between Narratives and Response Letter and preserve all existing behavior inside each view.

That the design should roughly resemble the provided screenshot (rounded pill, animated thumb, two labels).

Identify key considerations to avoid disrupting existing functionality

Ensure:

The new switch is mobile-first and looks good on small screens.

The layout does not break the existing card layouts or swipe carousel.

The toggle is accessible (tab order, focus states, screen reader labels).

Do not change:

Regeneration logic and limits.

Download/Copy behavior.

Tooltip logic.

Propose best-practice UX for the toggle

Define:

Default selection (likely Narratives on initial load).

How the thumb animation should behave (simple CSS transition).

How active/inactive states are visually differentiated (background color, text color).

Assess other best practices

Use Tailwind classes for:

Rounded container (rounded-full).

Inner thumb styling and transitions (transition-transform, etc.).

Responsive padding and typography.

Consider a reusable SegmentedToggle component if it simplifies the code, but keep scope constrained to this use case.

Generate a step-by-step implementation plan

At a minimum include:

Step 1: Locate and remove/replace the existing pill/tab navigation JSX for the “both” case.

Step 2: Implement a new switch/toggle component:

Props: value, onChange, possible options ["narratives", "letter"].

Structure: outer pill container + inner thumb + labels.

Step 3: Wire the toggle’s value to the existing state variable (or an equivalent).

Step 4: Update the conditional rendering logic to use the toggle state (if needed, reuse the existing logic).

Step 5: Manually test:

“Both” selection: switching back and forth between views on mobile and desktop.

Narratives-only and letter-only cases: ensure no toggle is shown and behavior is unchanged.

Keep the scope limited

Do not:

Modify document generation logic or API calls.

Alter the content of narratives or letters.

Change regen limits, tooltips, or button placement.

Only replace the navigation control for switching between views when both are present.

Propose a skeleton framework

Provide a simplified example of the toggle component in JSX, such as:

function DocumentToggle({ value, onChange }) {
  const isNarratives = value === "narratives";

  return (
    <div className="relative flex w-full max-w-xs mx-auto rounded-full bg-purple-500 p-1">
      <div
        className={`absolute inset-y-1 w-1/2 rounded-full bg-white transition-transform ${
          isNarratives ? "translate-x-0" : "translate-x-full"
        }`}
      />
      <button
        type="button"
        className="relative z-10 flex-1 text-center text-sm font-medium"
        onClick={() => onChange("narratives")}
      >
        Narratives
      </button>
      <button
        type="button"
        className="relative z-10 flex-1 text-center text-sm font-medium"
        onClick={() => onChange("letter")}
      >
        Response Letter
      </button>
    </div>
  );
}


Clarify how this component will be integrated into the Documents Page and how it will control which view is rendered.

Do not modify any files yet

First, output your understanding of this UI change and your implementation plan.

Remember: do NOT perform any e2e tests for this fix—I will manually confirm it myself.

Wait for my confirmation that your approach is sound before updating the code.